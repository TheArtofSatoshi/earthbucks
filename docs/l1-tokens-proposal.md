A UTXO-based blockchain structure that adds fields to the structure of the Bitcoin blockchain and has a native token scheme, which I call colored coins (dyed for ease of understanding, essentially a hash mark)

1. The transaction output class needs to add a new field hash
2. Ordinary transaction verification requires additional verification logic.
3. Coinbase transaction verification requires additional verification logic.
4. Block verification needs to add new verification logic

The specific logic is as follows
1. After the transaction output has a hash tag field, there are only two results. A value of 0 (all 0) means it is not marked, and a value other than zero means it is marked.
2. To verify that ordinary transactions (non-coinbase) are valid, additional verification logic needs to be added. Specifically, it means: all inputs and outputs of the transaction must be traversed and all output values marked by different hashes must be less than or equal to the input values of the transaction inputs marked by the corresponding hash.
3. The miner needs to verify that the ordinary transactions (all or part) in the transaction pool that currently need to be packaged meet 2, and calculate the difference of all corresponding hash marks in all these transactions as utxo (can be single or multiple) and add it to the coinbase output superior.
4. Coinbase transaction is a special transaction, essentially there is no input, only output. In addition to the UTXO generated by the block mining fee, the Coinbase transaction itself has a certain number of native token rewards.
5. A coinbase transaction structure that does not participate in hash marking is as follows:
     1. Assume that the current block reward is 50 original coins (not marked), and then the transaction output generated by the mining fee includes 10 red coins, 10 green coins, and white original coins.
     2. When building a coinbase transaction, there can be 3 red coin outputs (the 3 red coin outputs add up to 10), 2 green coin outputs (the 2 green coin outputs add up to 10) and 1 white coin output (output Quantity equals 60)
6. The structure of a coinbase transaction that participates in hash marking is as follows:
     1. Assume that the current block reward is 50 white coins, and then the transaction output generated by the mining fee includes 10 red coins, 10 green coins, and 10 white coins.
     2. When building a coinbase transaction, you can output 3 red coins (the output of 3 red coins added up equals 10), the output of 2 green coins (the output of 2 green coins added up equals 10), and the remaining 60 white coins Color all outputs (or outputs) as one yellow. (Yellow here refers to marking a specific color with a hash. Here we use the hashPrevBlock field in the block header to mark it, that is, assign the value of hashPrevBlock in the current block header to the coloring field hash in the current coinbase transaction output. , since this field is unlikely to be repeated).
7. Next, the miner will package all transactions to generate Mokel roots and start the workload proof to generate blocks.
8. After miners generate blocks, they will broadcast the blocks to the entire network.
9. Other miners will verify the validity of the block. Including verifying the validity of each transaction, especially coinbase transactions, it must be ensured that the color output value in the coinbase transaction except the color marked by the current block header hashPrevBlock is equal to the corresponding color transactions of all non-coinbase transaction fees in the block difference. If hashPrevBlock is equal to hash or hash is 0, and the difference is correct, then the block is valid, add the block to the blockchain, and mine the next block. If not, the block is invalid and the block is rejected.
10. [Note] There is no issue of additional issuance here, because additional issuance can be done by adding one more color utxo. For example, green and red are marked with US dollars.